/**
 * Usefull stuff
 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getChildNodes = getChildNodes;
exports.getAttributes = getAttributes;
exports.getNodeIndex = getNodeIndex;
exports.getChildAtIndex = getChildAtIndex;
exports.without = without;
exports.toJSON = toJSON;

function getChildNodes(node) {

    return Array.prototype.slice.call(node.childNodes);
}

function getAttributes(node) {

    var attrs = node.attributes;
    var attributes = {};

    if (attrs !== undefined) {

        for (var i = attrs.length - 1; i >= 0; i--) {

            attributes[attrs[i].name] = attrs[i].value;
        }
    }

    return attributes;
}

function getNodeIndex(node) {

    for (var i = 0; node = node.previousSibling; i++);

    return i;
}

function getChildAtIndex(parent, index) {

    return getChildNodes(parent)[index];
}

function without(arr, value) {

    var index = arr.indexOf(value);

    if (index > -1) arr.splice(index, 1);

    return arr;
}

function toJSON(node) {

    return {
        tagName: node.tagName,
        type: node.nodeType,
        name: node.nodeName,
        value: node.nodeValue,
        attributes: node.attributes && getAttributes(node.attributes),
        children: getChildNodes(node).map(toJSON)
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7UUFLZ0IsYUFBYSxHQUFiLGFBQWE7UUFLYixhQUFhLEdBQWIsYUFBYTtRQWdCYixZQUFZLEdBQVosWUFBWTtRQU9aLGVBQWUsR0FBZixlQUFlO1FBTWYsT0FBTyxHQUFQLE9BQU87UUFXUCxNQUFNLEdBQU4sTUFBTTs7QUE3Q2YsU0FBUyxhQUFhLENBQUMsSUFBSSxFQUFDOztBQUUvQixXQUFPLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7Q0FDdEQ7O0FBRU0sU0FBUyxhQUFhLENBQUMsSUFBSSxFQUFDOztBQUUvQixRQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO0FBQzVCLFFBQUksVUFBVSxHQUFHLEVBQUUsQ0FBQzs7QUFFcEIsUUFBRyxLQUFLLEtBQUssU0FBUyxFQUFDOztBQUVuQixhQUFJLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUM7O0FBRXRDLHNCQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7U0FDOUM7S0FDSjs7QUFFRCxXQUFPLFVBQVUsQ0FBQztDQUNyQjs7QUFFTSxTQUFTLFlBQVksQ0FBQyxJQUFJLEVBQUM7O0FBRTlCLFNBQUssSUFBSSxDQUFDLEdBQUMsQ0FBQyxFQUFHLElBQUksR0FBQyxJQUFJLENBQUMsZUFBZSxFQUFHLENBQUMsRUFBRSxFQUFFOztBQUVoRCxXQUFPLENBQUMsQ0FBQztDQUNaOztBQUVNLFNBQVMsZUFBZSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUM7O0FBRTFDLFdBQU8sYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0NBQ3ZDOztBQUdNLFNBQVMsT0FBTyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUM7O0FBRS9CLFFBQUksS0FBSyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7O0FBRS9CLFFBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQyxFQUNULEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDOztBQUV6QixXQUFPLEdBQUcsQ0FBQztDQUNkOztBQUdNLFNBQVMsTUFBTSxDQUFDLElBQUksRUFBQzs7QUFFeEIsV0FBTztBQUNILGVBQU8sRUFBRSxJQUFJLENBQUMsT0FBTztBQUNyQixZQUFJLEVBQUUsSUFBSSxDQUFDLFFBQVE7QUFDbkIsWUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRO0FBQ25CLGFBQUssRUFBRSxJQUFJLENBQUMsU0FBUztBQUNyQixrQkFBVSxFQUFFLElBQUksQ0FBQyxVQUFVLElBQUksYUFBYSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUM7QUFDN0QsZ0JBQVEsRUFBRyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztLQUM3QyxDQUFBO0NBQ0oiLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVzZWZ1bGwgc3R1ZmZcbiAqL1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGlsZE5vZGVzKG5vZGUpe1xuXG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG5vZGUuY2hpbGROb2Rlcyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBdHRyaWJ1dGVzKG5vZGUpe1xuXG4gICAgbGV0IGF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgIGxldCBhdHRyaWJ1dGVzID0ge307XG5cbiAgICBpZihhdHRycyAhPT0gdW5kZWZpbmVkKXtcblxuICAgICAgICBmb3IodmFyIGkgPSBhdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSl7XG5cbiAgICAgICAgICAgIGF0dHJpYnV0ZXNbYXR0cnNbaV0ubmFtZV0gPSBhdHRyc1tpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhdHRyaWJ1dGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Tm9kZUluZGV4KG5vZGUpe1xuXG4gICAgZm9yICh2YXIgaT0wOyAobm9kZT1ub2RlLnByZXZpb3VzU2libGluZyk7IGkrKyk7XG5cbiAgICByZXR1cm4gaTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENoaWxkQXRJbmRleChwYXJlbnQsIGluZGV4KXtcblxuICAgIHJldHVybiBnZXRDaGlsZE5vZGVzKHBhcmVudClbaW5kZXhdO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB3aXRob3V0KGFyciwgdmFsdWUpe1xuXG4gICAgbGV0IGluZGV4ID0gYXJyLmluZGV4T2YodmFsdWUpO1xuXG4gICAgaWYoaW5kZXggPiAtMSlcbiAgICAgICAgYXJyLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICByZXR1cm4gYXJyO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiB0b0pTT04obm9kZSl7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0YWdOYW1lOiBub2RlLnRhZ05hbWUsXG4gICAgICAgIHR5cGU6IG5vZGUubm9kZVR5cGUsXG4gICAgICAgIG5hbWU6IG5vZGUubm9kZU5hbWUsXG4gICAgICAgIHZhbHVlOiBub2RlLm5vZGVWYWx1ZSxcbiAgICAgICAgYXR0cmlidXRlczogbm9kZS5hdHRyaWJ1dGVzICYmIGdldEF0dHJpYnV0ZXMobm9kZS5hdHRyaWJ1dGVzKSxcbiAgICAgICAgY2hpbGRyZW4gOiBnZXRDaGlsZE5vZGVzKG5vZGUpLm1hcCh0b0pTT04pXG4gICAgfVxufSJdfQ==